<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{margin: 0;padding: 0;}
        body{color: #fff;background: #111;}
        #parallax{overflow: hidden;}
        .item{position: relative;height: 100vh;display: flex;justify-content: center;align-items: center;}
        section:nth-child(2n){background: #222;}
        .num{position: absolute;right: 20px;bottom: 20px;font-size: 5vw;}
        .item_img{width: 10vw;height: 10vw;background-size: cover;background-position: center;margin: 1vw;}
        /* width: 10vw; 100등분했을때 10개를 가져감 */
        #section1 .item_img{background-image: url(https://cdn.pixabay.com/photo/2021/07/30/04/17/orange-6508617_1280.jpg);}
        #section2 .item_img{background-image: url(https://cdn.pixabay.com/photo/2021/07/30/04/17/orange-6508617_1280.jpg);}
        #section3 .item_img{background-image: url(https://cdn.pixabay.com/photo/2021/07/30/04/17/orange-6508617_1280.jpg);width: 100px;height: 100px;border-radius: 50px;}
        #section4 .item_img{background-image: url(https://cdn.pixabay.com/photo/2024/08/19/15/01/sunflowers-8980921_1280.jpg);}
        #section8 .item_img{background-image: url(https://cdn.pixabay.com/photo/2024/07/12/14/41/sea-turtle-8890529_1280.jpg);}
        #section9 .item_img{background-image: url(https://cdn.pixabay.com/photo/2020/03/19/12/16/jellyfish-4947355_640.jpg);border-radius: 50%;}
        .item_text{font-size: 5vw;}
        #section7 .item_text{position: absolute;left: 50%;top: 50%;transform: translate(-50%,-50%);background: #111;padding: 30px;text-align: center;width: 100%;opacity: 0;}
        #section5,#section8{flex-direction: column;}
    </style>
</head>
<body>
    <main id="parallax">
        <section id="section1" class="item">
            <div class="num">01</div>
            <div class="item_img"></div>
        </section>
        <section id="section2" class="item">
            <div class="num">02</div>
            <div class="item_img i1"></div>
            <div class="item_img i2"></div>
            <div class="item_img i3"></div>
        </section>
        <section id="section3" class="item">
            <div class="num">03</div>
            <div class="item_img"></div>
            <div class="item_img"></div>
            <div class="item_img"></div>
            <div class="item_img"></div>
            <div class="item_img"></div>
            <div class="item_img"></div>
        </section>
        <section id="section4" class="item">
            <div class="num">04</div>
            <div class="item_img"></div>
        </section>
        <section id="section5" class="item">
            <div class="num">05</div>
            <div class="item_text t1">section5</div>
            <div class="item_text t2">section5</div>
            <div class="item_text t3">section5</div>
            <div class="item_text t4">section5</div>
        </section>
        <section id="section6" class="item">
            <div class="num">06</div>
            <div class="item_text">section6</div>
        </section>
        <section id="section7" class="item">
            <div class="num">07</div>
            <div class="item_text t1">코딩이란</div>
            <div class="item_text t2">프로그래밍 코드를</div>
            <div class="item_text t3">어딘가에</div>
            <div class="item_text t4">적는 것을 말한다</div>
            <div class="item_text t5">코딩은</div>
            <div class="item_text t6">누구나</div>
            <div class="item_text t7">할 수 있다</div>
        </section>
        <section id="section8" class="item">
            <div class="num">08</div>
            <div class="item_text t1">section8 title1</div>
            <div class="item_text t2">section8 title2</div>
            <div class="item_text t3">section8 title3</div>
            <div class="item_img i1"></div>
        </section>
        <section id="section9" class="item">
            <div class="num">09</div>
            <div class="item_img i1"></div>
        </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

    <!-- to는 애니메이션 시작할 때 모습이 본래 모습, from은 애니메이션 끝날 때 모습이 본래모습 -->
    <script>
        const ani1 = gsap.timeline(); //할당 재선언 안됨
        ani1.to("#section1 .item_img",{
            rotation: 720,
            scale: 0,
            borderRadius: 200,
        }).to("#section1 .item_img",{
            rotation: 0,
            scale: 1,
            borderRadius: 20,
        });
        ScrollTrigger.create({
            animation: ani1,
            trigger:"#section1", //현재 화면의 고정
            // markers: true,
            start:"top top", //start의 탑, scroller-start의 탑
            // end:"+=2000", //"50% 80%" end의 탑, scroller-end의 탑
            pin: true, //원래 자리에 고정
            scrub: true, //스크롤 내릴 때마다 애니메이션이 프레임마냥 적용
            id:"box1",
            anticipatePin: 1,
        });

        const ani2 = gsap.timeline({
            defaults:{autoAlpha: 0, // = opacity와 동일
            borderRadius: 200,} // 겹치는 부분은 이렇게 한꺼번에 적용시킬 수 있음
        });
        ani2.from("#section2 .i1",{
            y: -100,
            // autoAlpha: 0, 
            // borderRadius: 200,
        }).from("#section2 .i2",{
            y: 100,
            // autoAlpha: 0,
            // borderRadius: 200,
        }).from("#section2 .i3",{
            y: -100,
            // autoAlpha: 0,
            // borderRadius: 200,
        });
        ScrollTrigger.create({
            animation: ani2,
            trigger:"#section2",
            // markers: true,
            start:"top top", 
            // end:"+=2000",
            pin: true, 
            scrub: true,
            id:"box1",
            anticipatePin: 1,
        });

        const ani3 = gsap.timeline();
        ani3.from("#section3 .item_img",{
            y: -100,
            opacity: 0,
            stagger:{
                amount: 3, // 움직이는데 걸리는 시간? 스크롤 3번만에 완성?
                from: "random", // 순서 랜덤으로 내려옴
            }
        });
        ScrollTrigger.create({
            animation: ani3,
            trigger:"#section3",
            // markers: true,
            start:"top top", 
            // end:"+=2000",
            pin: true, 
            scrub: true,
            id:"box1",
            anticipatePin: 1,
        });
        
        const ani4 = gsap.timeline();
        ani4.from("#section4 .item_img",{
            opacity: 0,
            scale:5,
            width:"100vw",
            height:"100vh",
        });
        ScrollTrigger.create({
            animation: ani4,
            trigger:"#section4",
            // markers: true,
            start:"top top", 
            // end:"+=2000",
            pin: true, 
            scrub: true,
            id:"box1",
            anticipatePin: 1,
        });

        // 애니메이션이 하나씩 순서대로 진행됨
        const ani5 = gsap.timeline(); 
        ani5.to("#section5 .t1",{
            xPercent:300,
        },"txt").to("#section5 .t2",{
            xPercent:-300,
        },"txt").to("#section5 .t3",{
            xPercent:300,
        },"txt").to("#section5 .t4",{
            xPercent:-300,
        },"txt"); 
        // "단어(ex.txt)"에 동일한 문자가 들어가면 타임라인이 있어도 같은 걸로 인식해서 같이 진행됨.
        ScrollTrigger.create({
            animation: ani5,
            trigger:"#section5",
            // markers: true,
            start:"top top", 
            // end:"+=2000",
            pin: true, 
            scrub: true,
            id:"box1",
            anticipatePin: 1,
        });
        
        const ani6 = gsap.timeline();
        ani6.to("#section6 .item_text",{
            scale:60,
        }).to("#section6 .item_text",{
            opacity:0,
        });
        ScrollTrigger.create({
            animation: ani6,
            trigger:"#section6",
            // markers: true,
            start:"top top", 
            // end:"+=2000",
            pin: true, 
            scrub: true,
            id:"box1",
            anticipatePin: 1,
        });

        const ani7 = gsap.timeline({
            defaults:{scale:0,opacity:1,}
        });
        ani7.from("#section7 .t1",{})
        .from("#section7 .t2",{})
        .from("#section7 .t3",{})
        .from("#section7 .t4",{})
        .from("#section7 .t5",{})
        .from("#section7 .t6",{})
        .from("#section7 .t7",{});
        ScrollTrigger.create({
            animation: ani7,
            trigger:"#section7",
            // markers: true,
            start:"top top", 
            // end:"+=2000",
            pin: true, 
            scrub: true,
            id:"box1",
            anticipatePin: 1,
        });

        const ani8 = gsap.timeline();
        ani8.from("#section8 .t1",{
            x: innerWidth * 1 //현재보고 있는 가로 너비만큼
        })
        .from("#section8 .t2",{
            x: innerWidth * -1
        })
        .from("#section8 .t3",{
            x: innerWidth * 1
        })
        .from("#section8 .i1",{
            x: innerWidth * 1,
            rotation:360,
            scale:5,
        });
        ScrollTrigger.create({
            animation: ani8,
            trigger:"#section8",
            markers: true,
            start:"top top", 
            // end:"+=2000",
            pin: true, 
            scrub: true,
            id:"box1",
            anticipatePin: 1,
        });

        const ani9 = gsap.timeline();
        ani9.to("#section9 .i1",{
            scale:20,
        }).to("#section9 .i1",{
            scale:1,
        });
        ScrollTrigger.create({
            animation: ani9,
            trigger:"#section9",
            markers: true,
            start:"top top", 
            // end:"+=2000",
            pin: true, 
            scrub: true,
            id:"box1",
            anticipatePin: 1,
        });
    </script>
</body>
</html>